
#  (PART) Impact Measurement {-}

# Introduction {#impact-measurement}
## Cross-referencing

Please refer to \@ref(fig:ca-logo)
Please refer to \@ref(fig:cars-plot)
Please refer to \@ref(tab:drm)
Please refer to \@ref(tab:test) (this works but does not take us to the table)

## Citations
You can write citations, too. For example, we are using the **bookdown** package  in this sample book, which was built on top of R Markdown and **knitr** [@xie2015].

We can also cite R Packages, e.g. knitr [@R-knitr] or: Rmarkdown is a package by @R-rmarkdown

@center_for_data_science_and_public_policy_university_of_chicago_data_2018

## Tables 
```{r echo=FALSE, message=FALSE}
# load data 
drm <- readr::read_csv("resources/tables/datenreifegradmodell.csv", quote = "\"", na = c(""))
drm[is.na(drm)] <- ""
```

```{r}
mcaption <- function(tag, caption){
  # Do not use underscores in tag!
  stopifnot(length(grep("_", tag)) == 0)
  cat("<caption>(#tab:", tag, ")", caption, "</caption>", sep="")
}
```

### kable
```{r, drm, echo=FALSE}
k <- knitr::kable(drm, format = "html", caption = "Datenreifegrad sozialer Organisationen")
k %>% 
  kableExtra::kable_styling(font_size = 14) %>% 
  kableExtra::column_spec(which(colnames(drm) == "Ausgezeichnet"), background = "#1a9641", include_thead = TRUE) %>% 
  kableExtra::column_spec(which(colnames(drm) == "Fortgeschritten"), background = "#a6d96a", include_thead = TRUE) %>% 
  kableExtra::column_spec(which(colnames(drm) == "Ausreichend"), background = "#fdae61", include_thead = TRUE) %>% 
  kableExtra::column_spec(which(colnames(drm) == "Unzureichend"), background = "#d7191c", include_thead = TRUE)

```
we can reference kable tables: see \@ref(tab:drm)

### gt

```{r echo=FALSE}
gt_tbl <- gt::gt(drm)
# Show the gt Table
gt_tbl <- gt_tbl %>% 
   tab_header(
    title = "Data Maturity Framework",
    subtitle = mcaption("test", "Ein  Modellierungsframework")
  ) %>% 
  tab_source_note(
    source_note = "Quelle: Center for Data Science & Public Policy, Data Maturity Framework, University of Chicago."
  ) %>% 
  opt_row_striping(row_striping = FALSE) 

gt_tbl <- gt_tbl %>%   
  tab_style(
    style = list(cell_fill(color = "#d7191c")),
    locations = list(cells_body(columns = vars(Unzureichend)), cells_column_labels(vars(Unzureichend)))
    ) %>% 
  tab_style(
    style = list(cell_fill(color = "#fdae61")),
    locations = list(cells_body(columns = vars(Ausreichend)), cells_column_labels(vars(Ausreichend)))
  ) %>% 
  tab_style(
    style = list(cell_fill(color = "#a6d96a")),
    locations = list(cells_body(columns = vars(Fortgeschritten)), cells_column_labels(vars(Fortgeschritten)))
  ) %>% 
  tab_style(
    style = list(cell_fill(color = "#1a9641")),
    locations = list(cells_body(columns = vars(Ausgezeichnet)), cells_column_labels(vars(Ausgezeichnet)))
  )
gt_tbl 
```

sadly, referencing is not implemented yet for gt. 


## Images

You can include images like so:
 
![CorrelAid logo](resources/images/logo.png)

you can control width or height in different units like so: 

controlling the width:

![CorrelAid logo](resources/images/logo.png){width=1in}

controlling the height:

![CorrelAid logo](resources/images/logo.png){height=2cm}

the part in '[]' is the alt text. it is important for vision-impaired people to specify this because screenreaders will rely on them. 


You can also use R to include images. One advantage is that we can use the chunk label for crossreferencing. 
```{r, ca-logo}
knitr::include_graphics("resources/images/logo.png")
```

control width / height using different [chunk options](https://yihui.org/knitr/options/#plots) 
```{r, ca-logo2, out.width=200}
knitr::include_graphics("resources/images/logo.png")
```

```{r, ca-logo3, out.width="30%"}
knitr::include_graphics("resources/images/logo.png")
```

```{r cars-plot}
plot(cars$speed)
```

Please refer to \@ref(fig:ca-logo)
Please refer to \@ref(fig:cars-plot)
